<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- Custom CSS -->
    <link
      href="{{ url_for('static', filename='styles.css') }}"
      rel="stylesheet"
    />
    <title>Streaming Apps</title>
  </head>
  <body>
    <h2 class="text-center mb-4">Streaming Apps</h2>
    <!-- Bootstrap Grid with 5 columns per row -->
    <div class="container mt-5">
      <div class="form-container">
        <form id="urlForm">
          <div class="mb-3">
            <input
              type="text"
              class="form-control"
              id="urlInput"
              placeholder="Paste your URL here"
            />
          </div>
          <div class="d-grid">
            <button type="button" class="btn btn-primary" id="urlpasteButton">
              Open Custom URL
            </button>
          </div>
        </form>
      </div>
      <br />

      <div
        class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-4"
      >
        <!-- Netflix -->
        <div class="col">
          <div
            class="card h-100 text-center"
            onclick="openStreamingApp('https://www.netflix.com')"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg"
              class="card-img-top mx-auto mt-3"
              alt="Netflix"
            />
            <div class="card-body">
              <h5 class="card-title">Netflix</h5>
            </div>
          </div>
        </div>
        <!-- Max -->
        <div class="col">
          <div
            class="card h-100 text-center"
            onclick="openStreamingApp('https://play.max.com')"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Max_logo.svg/400px-Max_logo.svg.png"
              class="card-img-top mx-auto mt-3"
              alt="Max"
            />
            <div class="card-body">
              <h5 class="card-title">Max</h5>
            </div>
          </div>
        </div>
        <!-- Paramount+ -->
        <div class="col">
          <div
            class="card h-100 text-center"
            onclick="openStreamingApp('https://www.paramountplus.com')"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Paramount_Plus.svg/500px-Paramount_Plus.svg.png"
              class="card-img-top mx-auto mt-3"
              alt="Paramount+"
            />
            <div class="card-body">
              <h5 class="card-title">Paramount+</h5>
            </div>
          </div>
        </div>
        <!-- Crunchyroll -->
        <div class="col">
          <div
            class="card h-100 text-center"
            onclick="openStreamingApp('https://www.crunchyroll.com')"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/Crunchyroll_2024.svg/400px-Crunchyroll_2024.svg.png"
              class="card-img-top mx-auto mt-3"
              alt="Crunchyroll"
            />
            <div class="card-body">
              <h5 class="card-title">Crunchyroll</h5>
            </div>
          </div>
        </div>
        <!-- Disney+ -->
        <div class="col">
          <div
            class="card h-100 text-center"
            onclick="openStreamingApp('https://www.disneyplus.com')"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/Disney%2B_2024.svg/440px-Disney%2B_2024.svg.png"
              class="card-img-top mx-auto mt-3"
              alt="Disney+"
            />
            <div class="card-body">
              <h5 class="card-title">Disney+</h5>
            </div>
          </div>
        </div>
        <!-- Hulu -->
        <div class="col">
          <div
            class="card h-100 text-center"
            onclick="openStreamingApp('https://www.hulu.com')"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/Hulu_logo_%282018%29.svg/440px-Hulu_logo_%282018%29.svg.png"
              class="card-img-top mx-auto mt-3"
              alt="Hulu"
            />
            <div class="card-body">
              <h5 class="card-title">Hulu</h5>
            </div>
          </div>
        </div>
        <!-- Amazon Prime Video -->
        <div class="col">
          <div
            class="card h-100 text-center"
            onclick="openStreamingApp('https://www.primevideo.com')"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Prime_Video_logo_%282024%29.svg/440px-Prime_Video_logo_%282024%29.svg.png"
              class="card-img-top mx-auto mt-3"
              alt="Amazon Prime Video"
            />
            <div class="card-body">
              <h5 class="card-title">Amazon Prime Video</h5>
            </div>
          </div>
        </div>
        <!-- YouTube -->
        <div class="col">
          <div
            class="card h-100 text-center"
            onclick="openStreamingApp('https://www.youtube.com')"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/20/YouTube_2024.svg/500px-YouTube_2024.svg.png"
              class="card-img-top mx-auto mt-3"
              alt="YouTube"
            />
            <div class="card-body">
              <h5 class="card-title">YouTube</h5>
            </div>
          </div>
        </div>
        <!-- Twitch -->
        <div class="col">
          <div
            class="card h-100 text-center"
            onclick="openStreamingApp('https://www.twitch.tv')"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Twitch_logo_2019.svg/480px-Twitch_logo_2019.svg.png"
              class="card-img-top mx-auto mt-3"
              alt="Twitch"
            />
            <div class="card-body">
              <h5 class="card-title">Twitch</h5>
            </div>
          </div>
        </div>
        <!-- Apple TV+ -->
        <div class="col">
          <div
            class="card h-100 text-center"
            onclick="openStreamingApp('https://tv.apple.com')"
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/Apple_TV_Plus_Logo.svg/340px-Apple_TV_Plus_Logo.svg.png"
              class="card-img-top mx-auto mt-3"
              alt="Apple TV+"
            />
            <div class="card-body">
              <h5 class="card-title">Apple TV+</h5>
            </div>
          </div>
        </div>
      </div>

      <!-- Back Button -->
      <div class="text-center mt-4">
        <button id="backButton" class="btn btn-secondary">
          <i class="bi bi-arrow-left"></i> Back to Remote
        </button>
      </div>
    </div>

    <script>
      const socket = new WebSocket("ws://192.168.1.8:5000/ws");

      // Function to send the command to open a streaming URL
      function openStreamingApp(url) {
        const message = JSON.stringify({
          command: "open_url",
          args: [url],
        });
        socket.send(message);
        window.history.back(); // Go back to the previous page
      }

      // Back button functionality
      document
        .getElementById("backButton")
        .addEventListener("click", function () {
          window.history.back();
        });

      // Get references to the input and button elements
      const urlInput = document.getElementById("urlInput");
      const urlpasteButton = document.getElementById("urlpasteButton");

      // Button Click Event
      urlpasteButton.addEventListener("click", function () {
        const pasted_url_as_string = urlInput.value; // Get the URL from the input field

        if (pasted_url_as_string) {
          const message = JSON.stringify({
            command: "open_custom_url",
            args: [pasted_url_as_string],
          });
          socket.send(message); // Send the message via WebSocket
          alert(`URL sent: ${pasted_url_as_string}`);
        } else {
          alert("Please paste a valid URL.");
        }
      });

      // Optional: Handle WebSocket events
      socket.onopen = function () {
        console.log("WebSocket connection established.");
      };

      socket.onmessage = function (event) {
        console.log("Message from server:", event.data);
      };

      socket.onclose = function () {
        console.log("WebSocket connection closed.");
      };

      socket.onerror = function (error) {
        console.error("WebSocket error:", error);
      };
    </script>
  </body>
</html>
